(()=>{var e={};e.id=688,e.ids=[688],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},49967:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=s(50482),a=s(69108),n=s(62563),i=s.n(n),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d=["",{children:["(dashboard)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6489)),"/Users/keshavdayal/Desktop/template/Task-Management/app/(dashboard)/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,61071)),"/Users/keshavdayal/Desktop/template/Task-Management/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,66466)),"/Users/keshavdayal/Desktop/template/Task-Management/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/keshavdayal/Desktop/template/Task-Management/app/(dashboard)/profile/page.tsx"],m="/(dashboard)/profile/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},36502:(e,r,s)=>{Promise.resolve().then(s.bind(s,58374))},58374:(e,r,s)=>{"use strict";s.r(r),s.d(r,{ProfileForm:()=>g});var t=s(95344),a=s(3729),n=s(8428),i=s(85453),o=s(60708),l=s(29709),d=s(16212),c=s(78767),m=s(92549),p=s(30692),u=s(56389),x=s(82885),f=s(61351);let h=l.Ry({name:l.Z_().min(2,{message:"Name must be at least 2 characters"}),email:l.Z_().email({message:"Please enter a valid email address"}),currentPassword:l.Z_().optional(),newPassword:l.Z_().min(8,{message:"Password must be at least 8 characters"}).optional(),confirmPassword:l.Z_().optional()}).refine(e=>!e.newPassword||!!e.currentPassword,{message:"Current password is required when setting a new password",path:["currentPassword"]}).refine(e=>!e.newPassword||e.newPassword===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function g({user:e}){let r=(0,n.useRouter)(),{toast:s}=(0,p.pm)(),[l,g]=(0,a.useState)(!1),j=(0,o.cI)({resolver:(0,i.F)(h),defaultValues:{name:e.name||"",email:e.email||"",currentPassword:"",newPassword:"",confirmPassword:""}});async function w(e){g(!0);try{let t=await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,...e.newPassword&&{currentPassword:e.currentPassword,newPassword:e.newPassword}})}),a=await t.json();if(!t.ok)throw Error(a.message||"Something went wrong");s({title:"Success",description:"Your profile has been updated"}),r.refresh()}catch(e){s({title:"Error",description:e instanceof Error?e.message:"Something went wrong",variant:"destructive"})}finally{g(!1)}}return(0,t.jsxs)(f.Zb,{children:[(0,t.jsxs)(f.Ol,{children:[t.jsx(f.ll,{children:"Personal Information"}),t.jsx(f.SZ,{children:"Update your personal information"})]}),(0,t.jsxs)(f.aY,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,t.jsxs)(x.Avatar,{className:"h-20 w-20",children:[t.jsx(x.AvatarImage,{src:e.image||"",alt:e.name||""}),t.jsx(x.AvatarFallback,{children:e.name?e.name.charAt(0).toUpperCase():"U"})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium",children:e.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),t.jsx(c.l0,{...j,children:(0,t.jsxs)("form",{onSubmit:j.handleSubmit(w),className:"space-y-6",children:[t.jsx(c.Wi,{control:j.control,name:"name",render:({field:e})=>(0,t.jsxs)(c.xJ,{children:[t.jsx(c.lX,{children:"Name"}),t.jsx(c.NI,{children:t.jsx(m.I,{...e})}),t.jsx(c.pf,{children:"This is your public display name"}),t.jsx(c.zG,{})]})}),t.jsx(c.Wi,{control:j.control,name:"email",render:({field:e})=>(0,t.jsxs)(c.xJ,{children:[t.jsx(c.lX,{children:"Email"}),t.jsx(c.NI,{children:t.jsx(m.I,{...e,type:"email"})}),t.jsx(c.pf,{children:"This is the email you use to log in"}),t.jsx(c.zG,{})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium",children:"Change Password"}),t.jsx(c.Wi,{control:j.control,name:"currentPassword",render:({field:e})=>(0,t.jsxs)(c.xJ,{children:[t.jsx(c.lX,{children:"Current Password"}),t.jsx(c.NI,{children:t.jsx(m.I,{...e,type:"password"})}),t.jsx(c.zG,{})]})}),t.jsx(c.Wi,{control:j.control,name:"newPassword",render:({field:e})=>(0,t.jsxs)(c.xJ,{children:[t.jsx(c.lX,{children:"New Password"}),t.jsx(c.NI,{children:t.jsx(m.I,{...e,type:"password"})}),t.jsx(c.pf,{children:"Password must be at least 8 characters"}),t.jsx(c.zG,{})]})}),t.jsx(c.Wi,{control:j.control,name:"confirmPassword",render:({field:e})=>(0,t.jsxs)(c.xJ,{children:[t.jsx(c.lX,{children:"Confirm Password"}),t.jsx(c.NI,{children:t.jsx(m.I,{...e,type:"password"})}),t.jsx(c.zG,{})]})})]}),t.jsx(f.eW,{className:"flex justify-end px-0",children:(0,t.jsxs)(d.z,{type:"submit",disabled:l,children:[l&&t.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Profile"]})})]})})]})]})}},61351:(e,r,s)=>{"use strict";s.d(r,{Ol:()=>o,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>m,ll:()=>l});var t=s(95344),a=s(3729),n=s(91626);let i=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let o=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let m=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));m.displayName="CardFooter"},78767:(e,r,s)=>{"use strict";s.d(r,{l0:()=>m,NI:()=>j,pf:()=>w,Wi:()=>u,xJ:()=>h,lX:()=>g,zG:()=>y});var t=s(95344),a=s(3729),n=s(32751),i=s(60708),o=s(91626),l=s(14217);let d=(0,s(49247).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...r},s)=>t.jsx(l.f,{ref:s,className:(0,o.cn)(d(),e),...r}));c.displayName=l.f.displayName;let m=i.RV,p=a.createContext({}),u=({...e})=>t.jsx(p.Provider,{value:{name:e.name},children:t.jsx(i.Qr,{...e})}),x=()=>{let e=a.useContext(p),r=a.useContext(f),{getFieldState:s,formState:t}=(0,i.Gc)(),n=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},f=a.createContext({}),h=a.forwardRef(({className:e,...r},s)=>{let n=a.useId();return t.jsx(f.Provider,{value:{id:n},children:t.jsx("div",{ref:s,className:(0,o.cn)("space-y-2",e),...r})})});h.displayName="FormItem";let g=a.forwardRef(({className:e,...r},s)=>{let{error:a,formItemId:n}=x();return t.jsx(c,{ref:s,className:(0,o.cn)(a&&"text-destructive",e),htmlFor:n,...r})});g.displayName="FormLabel";let j=a.forwardRef(({...e},r)=>{let{error:s,formItemId:a,formDescriptionId:i,formMessageId:o}=x();return t.jsx(n.g7,{ref:r,id:a,"aria-describedby":s?`${i} ${o}`:`${i}`,"aria-invalid":!!s,...e})});j.displayName="FormControl";let w=a.forwardRef(({className:e,...r},s)=>{let{formDescriptionId:a}=x();return t.jsx("p",{ref:s,id:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...r})});w.displayName="FormDescription";let y=a.forwardRef(({className:e,children:r,...s},a)=>{let{error:n,formMessageId:i}=x(),l=n?String(n?.message):r;return l?t.jsx("p",{ref:a,id:i,className:(0,o.cn)("text-sm font-medium text-destructive",e),...s,children:l}):null});y.displayName="FormMessage"},92549:(e,r,s)=>{"use strict";s.d(r,{I:()=>i});var t=s(95344),a=s(3729),n=s(91626);let i=a.forwardRef(({className:e,type:r,...s},a)=>t.jsx("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));i.displayName="Input"},6489:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h,metadata:()=>f});var t=s(25036),a=s(81355),n=s(3205),i=s(867),o=s(99199),l=s(5759),d=s(86843);let c=(0,d.createProxy)(String.raw`/Users/keshavdayal/Desktop/template/Task-Management/components/profile-form.tsx`),{__esModule:m,$$typeof:p}=c;c.default;let u=(0,d.createProxy)(String.raw`/Users/keshavdayal/Desktop/template/Task-Management/components/profile-form.tsx#ProfileForm`);var x=s(47033);let f={title:"Profile",description:"Manage your profile"};async function h(){let e=await (0,a.getServerSession)(n.L);e||(0,i.redirect)("/login");let r=await x.db.user.findUnique({where:{id:e.user.id}});return r||(0,i.redirect)("/login"),(0,t.jsxs)(l.r,{children:[t.jsx(o.x,{heading:"Profile",text:"Manage your account settings"}),t.jsx("div",{className:"grid gap-10",children:t.jsx(u,{user:r})})]})}}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,123,825,856,589,23,468],()=>s(49967));module.exports=t})();